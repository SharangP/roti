{% extends "base.html" %}

{% block head %}
<style>

  .description{
      padding-top: 5px;
  }

  .vendor-container {
    padding-top: 10px;
    padding-bottom: 10px;
  }

  .vendor-list {
    height: 400px; /*TODO: fix this*/
    padding-top: 10px;
    padding-bottom: 50px;
    margin-bottom: 0;
    overflow: auto;
  }

  #map {
    width:100%;
    height:400px;
  }

</style>
<!-- Mapbox -->
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.css' rel='stylesheet' />
{% endblock %}

{% block content %}
<h1>Results</h1>
<h4>Results for <i>"{{query}}"</i></h4>

<div class="row vendor-container">
  <div class="col-lg-6 vendor-list" ng-controller="MapController as map">
    <div class="list-group" >
        {% for vendor in vendors %}
            <a class="list-group-item row" href="vendor/{{vendor.id}}">
                <div class="col-lg-3">
                    <img src="{{ vendor.image }}" />
                </div>
                <h4 class="list-group-item-heading">{{ vendor.user.get_name()}}</h4>
                <i class="list-group-item-text" ng-model="map.vendor">{{ vendor.address }}</i>
                <!--add a hidden element with the lat long of the vendor-->
                <p class="list-group-item-text description">{{ vendor.description }}</p>
            </a>
        {% endfor %}
     </div>
  </div>

  <div class="col-lg-5">
      <map id='map' location="{{latlng}}"></map>
  </div>

</div>
{% endblock %}
